{% extends 'base.html.twig' %}


{% block styles %}
    <link rel="stylesheet" href="{{ asset('stylesheet/user_style/article_style.css') }}">
{% endblock %}

{% block body %}
    <div class="container">
        <div class="article">
            <div class="category mt-5"> category </div>
            <div class="tags mt-2"> {{ article.tags }} </div>
        </div>
    </div>

    <div class="container-fluid mt-4">
        <h1 class="titles">Titre de l'article</h1>
    </div>

    <div class="container mt-3 mb-5">
        <div class="article">
            <div class="credit">Publié par <span class="user">user</span>  le 07.01.2020 </div>

            <div class="image mt-5" style="width: 500px"><img class="card-img-top" src="{{ article.image }}"></div>
            <div class="mt-5 ml-5 mr-5 content">{{ article.content }}</div>
        </div>
    </div>
    {% if article.comments is empty %} }}
    <div class="container">
        <h2>{{ article.comments | length }} Commentaires</h2>
    </div>
    {% else %}
        <div class="container">
            <h2>{{ article.comments | length }}Commentaire</h2>
        </div>
    {% endif %}

        {% for comment in article.comments %}

            <div class="container mt-4">
                <div >{{ comment.user.username }}</div>
                <div>Publié le {{ comment.created_at | date('D/M/Y') }} à {{ comment.created_at| date('H:i:s') }}</div>
                <p class="mt-4">{{ comment.content }}</p>
            </div>

        {%  endfor %}

    <div class="container">

    <h2>Ajouter un commentaire</h2>

        {% if app.user %}
        {{ form_start(formComment) }}
        <div class="row mt-3">
            <div class="col-8">
                {{ form_row(formComment.content, {'attr': {'class': 'form-control', 'placeholder': 'Contenu du commentaire'}, 'label': 'Votre commentaire:'}) }}
            </div>
        </div>
            <div class="row mt-4">
                {{ form_row(formComment.envoyer) }}
            </div>
        </div>
        {{ form_end(formComment) }}
        {% else %}
        <div class="p">Connectez-vous pour envoyer un commentaire</div>
        {% endif %}

        {#{% for comment in comments %}
        <div>{{ comment.content }}</div>
        {% endfor %}#}
{%  endblock %}

